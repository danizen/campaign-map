<!DOCTYPE html>
<html = style="height: 100%;">
  <head>
    <title>DnD World Map</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <link rel="stylesheet"
           href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
           integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
           crossorigin=""/>
     <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
             integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
             crossorigin=""></script>
  </head>
  
  <body style="height: 100%;margin: 0;">
    <div id="map" style="width: 100%; height: 100%; background: #000000;"></div>
    <script type="text/javascript">
      // Creating the Map
      var map = L.map('map').setView([0, 0], 0);
      L.tileLayer('images/data/{z}/{x}/{y}.png', {
        continuousWorld: false,
        noWrap: true,
        tileSize: 256,
        minZoom: 2,
        maxZoom: 6,
      }).addTo(map);
      // Coordinate Finder
      var marker = L.marker([0, 0], {
        draggable: true,
      }).addTo(map);
      marker.bindPopup('LatLng Marker').openPopup();
      marker.on('dragend', function(e) {
        marker.getPopup().setContent(marker.getLatLng().toString()).openOn(map);
      });
      // Markers
      var wroat = L.marker([-19.932041, -72.46582], {
        draggable: false,
      }).addTo(map);
      wroat.bindPopup('Wroat is the capital of Breland');

      // Create a fog of war pane
      map.createPane('fog');
      map.getPane('fog').style.zIndex = 650;
      map.getPane('fog').style.pointerEvents = 'none';

      var fogOfWar = {
        type: 'FeaturesCollection',
        features: [
          {
            type: 'Feature',
            geometry: {
              type: 'Polygon',
              coordinates: [[
                [23.241346, -36.738281],
                [23.402765, -8.613281],
                [37.71859, -25.3125],
                [23.241346, -36.738281],
              ]]
            },
          }
        ]
      };
      L.geoJSON(fogOfWar, {
        pane: 'fog',
        style: function(feature) {
          return {
            fillColor: '#000000',
            fillOpacity: 0.6,
            opacity: 0,
          };
        },
      }).addTo(map);
      // try it
      var geojsonFeature = {
        "type": "Feature",
        "properties": {
          "name": "Coors Field",
          "amenity": "Baseball Stadium",
          "popupContent": "This is where the Rockies play!"
        },
        "geometry": {
          "type": "Point",
          "coordinates": [-35.817813, -24.345703]
        }
      };
      L.geoJSON(geojsonFeature, {
        onEachFeature: function(feature, layer) {
          // does this feature have a property named popupContent?
          if (feature.properties && feature.properties.popupContent) {
            layer.bindPopup(feature.properties.popupContent);
          }
        }
      }).addTo(map);
    </script>
  </body>
</html>
